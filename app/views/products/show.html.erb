<div class="container-fluid my-5">
  <!-- Product Details -->
  <div class="row">
    <div class="col-md-4 mb-4">
      <% if @product.image.attached? %>
        <%= image_tag @product.image, class: "img-fluid rounded shadow-sm" %>
      <% else %>
        <%= image_tag 'placeholder.png', class: "img-fluid rounded shadow-sm" %>
      <% end %>
    </div>
    <div class="col-md-8">
      <h3><%= @product.name %></h3>
      <p class="lead"><%= @product.description %></p>
      <p class="h5"><strong>Price:</strong> <%= number_to_currency(@product.price) %></p>

   
      <!-- Add to Cart Button -->
<%= form_with url: add_cart_path, method: :post, local: true do %>
  <%= hidden_field_tag :product_id, @product.id %>
  <%= submit_tag 'Add to Cart', class: 'btn btn-success' %>
<% end %>


      <%= link_to "Edit", edit_product_path(@product), class: "btn btn-primary" %>
      <%= link_to "Back", root_path, class: "btn btn-secondary" %>
    </div>
  </div>

  <!-- Comments Section -->
  <div class="my-5">
    <h2 class="mb-4">Comments</h2>
    
    <div class="row justify-content-center">
      <div class="col-md-8">
        <%= render @product.comments %>

        <div class="border rounded p-4 mt-4 shadow-sm">
          <h3 class="mb-4">Add a comment:</h3>
          <%= render 'comments/form', product: @product %>
        </div>
      </div>
    </div>
  </div>

  <!-- Rating Section -->
  <div class="my-5 text-center">
    <h2 class="mb-4">Rating</h2>
    
    <div class="mx-auto" style="max-width: 400px;">
      <p class="lead mb-4">Average Rating: <strong><%= @product.average_rating %> / 5</strong></p>
      <%= render 'ratings/form', product: @product %>
    </div>
  </div>
</div>
